<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mebel V Trende ‚Äî –ú–∞–≥–∞–∑–∏–Ω –º–µ–±–µ–ª–∏</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    :root {
      --bg: #0f1720;
      --card: #0b1116;
      --muted: #9aa4ae;
      --accent: #ff6a00;
      --white: #eef3f7;
    }
    body { background: var(--bg); color: var(--white); transition: .3s; }
    .light-theme { --bg:#f4f6f9; --card:#fff; --muted:#555; --accent:#ff6a00; --white:#0f1720; }
    .social-float{position:fixed;right:20px;bottom:20px;display:flex;flex-direction:column;gap:10px;z-index:1000}
    .social-float a{width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:26px;color:#fff;text-decoration:none;transition:.2s}
    .social-float a:hover{transform:scale(1.1)}
    .whatsapp{background:#25D366}.telegram{background:#0088cc}
    .instagram{background:radial-gradient(circle at 30% 107%,#fdf497 0%,#fdf497 5%,#fd5949 45%,#d6249f 60%,#285AEB 90%)}
    #theme-toggle{border:none;background:var(--card);color:var(--white);font-size:20px;border-radius:8px;padding:6px 10px;cursor:pointer;transition:.3s}
    #theme-toggle:hover{background:var(--accent);color:#fff}
    .price-filter{display:flex;flex-direction:column;gap:10px;margin:15px 0;padding:14px;background:var(--card);border:1px solid #1f2933;border-radius:12px;font-size:14px}
    .price-filter input[type="number"]{width:100px;padding:6px 10px;border:1px solid #1f2933;border-radius:8px;background:#0f1720;color:var(--white);font-size:14px}
    .price-filter input[type="range"]{-webkit-appearance:none;width:100%;height:6px;background:#1f2933;border-radius:6px;cursor:pointer}
    .price-filter input[type="range"]::-webkit-slider-thumb{width:16px;height:16px;border-radius:50%;background:var(--accent);box-shadow:0 0 8px rgba(255,106,0,0.6)}
    .price-value{font-weight:600;color:var(--accent)}
    .map-section{margin-top:50px;}
    .map-title{font-size:24px;font-weight:800;color:var(--accent);margin-bottom:10px;}
    .map-desc{color:var(--muted);margin-bottom:20px;}
    .map-container{width:100%;height:400px;border-radius:16px;overflow:hidden;border:1px solid rgba(255,255,255,0.1);}
  </style>
</head>
<body>
  <div class="wrap">
    <!-- === HEADER === -->
    <header class="header">
      <div class="logo">
        <img src="logo.png" alt="Mebel V Trende" class="logo-img">
        <div class="brand-text">
          <div class="brand-title">Mebel V Trende</div>
          <div class="brand-sub">–î–∏–≤–∞–Ω—ã ‚Ä¢ –°—Ç—É–ª—å—è ‚Ä¢ –°—Ç–æ–ª—ã</div>
        </div>
      </div>
      <nav class="main-nav">
        <a href="#catalog">–ö–∞—Ç–∞–ª–æ–≥</a>
        <a href="#popular">–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</a>
        <a href="#about">–û –Ω–∞—Å</a>
      </nav>
      <div class="actions">
        <button class="btn" onclick="openCart()">–ö–æ—Ä–∑–∏–Ω–∞ (<span id="cart-count">0</span>)</button>
        <button class="btn" onclick="scrollToSection('catalog')">–°–º–æ—Ç—Ä–µ—Ç—å –∫–∞—Ç–∞–ª–æ–≥</button>
        <button id="theme-toggle">üåô</button>
      </div>
    </header>

    <!-- === HERO === -->
    <section class="hero">
      <div class="hero-left">
        <h1>–ú–µ–±–µ–ª—å –≤ —Ç—Ä–µ–Ω–¥–µ ‚Äî —É—é—Ç –∏ —Å—Ç–∏–ª—å –≤ –∫–∞–∂–¥–æ–º –¥–æ–º–µ</h1>
        <p class="muted">–ë–æ–ª—å—à–æ–π –≤—ã–±–æ—Ä –¥–∏–≤–∞–Ω–æ–≤, —Å—Ç—É–ª—å–µ–≤ –∏ —Å—Ç–æ–ª–æ–≤. –§–∞–±—Ä–∏—á–Ω–∞—è –º–µ–±–µ–ª—å, –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –ö–æ—Å—Ç–∞–Ω–∞–π—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏</p>
        <div class="order-block">
          <h2>–•–æ—Ç–∏—Ç–µ –º–µ–±–µ–ª—å –ø–æ–¥ –∑–∞–∫–∞–∑?</h2>
          <p>–ò–∑–≥–æ—Ç–æ–≤–∏–º –¥–∏–≤–∞–Ω—ã, —Å—Ç—É–ª—å—è –∏ —Å—Ç–æ–ª—ã –ø–æ –≤–∞—à–∏–º —Ä–∞–∑–º–µ—Ä–∞–º –∏ –¥–∏–∑–∞–π–Ω—É.</p>
          <a href="#order" class="btn-order">–°–¥–µ–ª–∞—Ç—å –Ω–∞ –∑–∞–∫–∞–∑</a>
        </div>
        <div class="controls">
          <div class="categories" id="category-controls">
            <button class="chip active" data-cat="all" onclick="setCategory('all')">–í—Å–µ</button>
            <button class="chip" data-cat="–î–∏–≤–∞–Ω—ã" onclick="setCategory('–î–∏–≤–∞–Ω—ã')">–î–∏–≤–∞–Ω—ã</button>
            <button class="chip" data-cat="–°—Ç–æ–ª—ã" onclick="setCategory('–°—Ç–æ–ª—ã')">–°—Ç–æ–ª—ã</button>
            <button class="chip" data-cat="–°—Ç—É–ª—å—è" onclick="setCategory('–°—Ç—É–ª—å—è')">–°—Ç—É–ª—å—è</button>
          </div>
          <div class="search-sort">
            <input id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Ç–æ–≤–∞—Ä–∞–º..." oninput="onSearch()" />
            <select id="sort" onchange="onSort()">
              <option value="default">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</option>
              <option value="cheap">–°–Ω–∞—á–∞–ª–∞ –¥–µ—à—ë–≤—ã–µ</option>
              <option value="expensive">–°–Ω–∞—á–∞–ª–∞ –¥–æ—Ä–æ–≥–∏–µ</option>
              <option value="rating">–ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É</option>
            </select>
          </div>
          <div class="price-filter">
            <label>
              –¶–µ–Ω–∞ –æ—Ç 
              <input id="priceMin" type="number" min="10000" step="10000" value="10000" oninput="renderProducts()" />
              –¥–æ
              <input id="priceMax" type="range" min="10000" max="2000000" step="10000" value="2000000" oninput="onPriceRange()"/>
            </label>
            <div class="price-value">–¥–æ <span id="priceMaxVal">2 000 000</span> —Ç–≥</div>
          </div>
        </div>
      </div>
      <aside class="hero-right card">
        <div style="font-weight:700">–ë—ã—Å—Ç—Ä–∞—è –∫–æ—Ä–∑–∏–Ω–∞</div>
        <div id="mini-cart" class="muted" style="margin-top:10px">–ü—É—Å—Ç–æ</div>
        <div style="margin-top:12px;display:flex;gap:8px">
          <button class="btn" onclick="openCart()">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
          <button class="btn accent" onclick="openCheckout()">–û—Ñ–æ—Ä–º–∏—Ç—å</button>
        </div>
      </aside>
    </section>

    <!-- === CATALOG === -->
    <section id="catalog" class="catalog-section">
      <h2>–ö–∞—Ç–∞–ª–æ–≥</h2>
      <div id="products" class="products-grid"></div>
      <div id="pagination" style="margin-top:14px;text-align:center"></div>
    </section>

    <!-- === POPULAR === -->
    <section id="popular" class="popular-section">
      <h2>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ</h2>
      <div id="popular-list" class="products-grid small-grid"></div>
    </section>

    <!-- === ABOUT === -->
    <section id="about" class="about-section">
      <h2>–ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç –Ω–∞—Å</h2>
      <div class="features">
        <div class="feature">üöö –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞</div>
        <div class="feature">üõ°Ô∏è –ì–∞—Ä–∞–Ω—Ç–∏—è 18 –º–µ—Å—è—Ü–µ–≤</div>
        <div class="feature">üí≥ –£–¥–æ–±–Ω–∞—è –æ–ø–ª–∞—Ç–∞</div>
        <div class="feature">üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
      </div>
      <div class="about-text card">
        <p class="muted">Mebel V Trende ‚Äî –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤, –º—ã –ø–æ–¥–±–µ—Ä—ë–º –º–µ–±–µ–ª—å –ø–æ–¥ –≤–∞—à –∏–Ω—Ç–µ—Ä—å–µ—Ä, –ø–æ–º–æ–∂–µ–º —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π.</p>
        <p><strong>–ö–æ–Ω—Ç–∞–∫—Ç—ã:</strong> +7 708 501 54 23 ‚Äî Whatsapp / –ó–≤–æ–Ω–æ–∫</p>
      </div>
    </section>

    <!-- === MAP === -->
    <section class="map-section wrap">
      <h2 class="map-title">–ì–¥–µ –Ω–∞—Å –Ω–∞–π—Ç–∏</h2>
      <p class="map-desc">–ù–∞—à–∏ —Å–∞–ª–æ–Ω—ã –∏ —Ç–æ—á–∫–∏ –ø—Ä–æ–¥–∞–∂ –≤ –ö–æ—Å—Ç–∞–Ω–∞–µ</p>
      <div class="map-container">
        <script async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3Aa48afa48fede7839eadf45b13d6fc462fe1d4866fb2e5f81b0313bcbe9c389e7&amp;width=100%25&amp;height=400&amp;lang=ru_RU&amp;scroll=true"></script>
      </div>
    </section>

    <!-- === FOOTER === -->
    <footer class="footer">
      <div>¬© Mebel V Trende ‚Äî –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã</div>
      <div class="muted">–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –ö–æ—Å—Ç–∞–Ω–∞–π—Å–∫–æ–π –æ–±–ª–æ—Å—Ç–∏ ‚Ä¢ support@mebelvtrende.kz</div>
    </footer>
  </div>

  <!-- === CART SIDEBAR === -->
  <aside id="cart" class="cart-sidebar" aria-hidden="true">
    <div class="cart-header"><h3>–ö–æ—Ä–∑–∏–Ω–∞</h3><button class="close" onclick="closeCart()">‚úï</button></div>
    <div id="cart-items" class="cart-items"></div>
    <div class="cart-footer">
      <div>–ò—Ç–æ–≥–æ: <strong id="cart-total">0 —Ç–≥</strong></div>
      <div style="display:flex;gap:8px;margin-top:10px">
        <button class="btn" onclick="clearCart()">–û—á–∏—Å—Ç–∏—Ç—å</button>
        <button class="btn accent" onclick="openCheckout()">–û—Ñ–æ—Ä–º–∏—Ç—å</button>
      </div>
    </div>
  </aside>

  <!-- === CHECKOUT MODAL === -->
  <div id="checkout" class="modal" aria-hidden="true">
    <div class="modal-box">
      <button class="close" onclick="closeCheckout()">‚úï</button>
      <h3>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>
      <form id="checkout-form" onsubmit="submitOrder(event)">
        <div class="field"><label>–§–ò–û</label><input id="fio" required></div>
        <div class="field"><label>–¢–µ–ª–µ—Ñ–æ–Ω</label><input id="phone" required placeholder="+7 708 123 45 67"></div>
        <div class="field"><label>–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è</label>
          <div><label><input type="radio" name="receive" value="–°–∞–º–æ–≤—ã–≤–æ–∑" checked> –°–∞–º–æ–≤—ã–≤–æ–∑</label>
          <label><input type="radio" name="receive" value="–î–æ—Å—Ç–∞–≤–∫–∞"> –î–æ—Å—Ç–∞–≤–∫–∞</label></div>
        </div>
        <div id="delivery-options" style="display:none">
          <div class="field"><label>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label><input id="address" placeholder="–ì–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –¥–æ–º, –∫–≤."></div>
          <div class="field"><label>–ü–æ–¥—ä—ë–º</label>
            <div><label><input type="radio" name="lift" value="noLift" checked> –ü–æ–¥—ä—ë–º 2000 —Ç–≥/—ç—Ç–∞–∂</label>
            <label><input type="radio" name="lift" value="lift"> –ï—Å—Ç—å –ª–∏—Ñ—Ç (3000 —Ç–≥)</label></div>
          </div>
          <div class="field"><label>–≠—Ç–∞–∂–∏ (–µ—Å–ª–∏ –ø–æ–¥—ä—ë–º –±–µ–∑ –ª–∏—Ñ—Ç–∞)</label><input id="floors" type="number" min="0" value="1"></div>
          <div class="muted">–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥—ä—ë–º–∞: <span id="delivery-cost">0 —Ç–≥</span></div>
        </div>
        <div class="order-summary card" style="margin-top:12px">
          <div style="font-weight:700">–¢–æ–≤–∞—Ä—ã</div>
          <div id="order-items" style="margin-top:8px"></div>
          <div style="border-top:1px solid rgba(255,255,255,0.03);padding-top:8px;margin-top:8px">–ò—Ç–æ–≥–æ: <strong id="order-total">0 —Ç–≥</strong></div>
        </div>
        <p class="muted" style="font-size:12px;margin-top:8px">
          –ù–∞–∂–∏–º–∞—è ¬´–ö—É–ø–∏—Ç—å¬ª, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ —É—Å–ª–æ–≤–∏—è–º–∏ –º–∞–≥–∞–∑–∏–Ω–∞.
        </p>
        <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
          <button type="button" class="btn" onclick="closeCheckout()">–û—Ç–º–µ–Ω–∞</button>
          <button type="submit" class="btn accent">–ö—É–ø–∏—Ç—å</button>
        </div>
      </form>
    </div>
  </div>

  <!-- === SOCIAL FLOAT === -->
  <div class="social-float">
    <a class="whatsapp" href="https://wa.me/77085015423" target="_blank"><i class="fab fa-whatsapp"></i></a>
    <a class="telegram" href="https://t.me/burrymewithwaifu" target="_blank"><i class="fab fa-telegram"></i></a>
    <a class="instagram" href="https://www.instagram.com/mebel_v_trende.kst/" target="_blank"><i class="fab fa-instagram"></i></a>
  </div>

  <!-- === SCRIPTS === -->
  <script src="products.js"></script>
  <script src="script.js"></script>

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script>
    (function(){ emailjs.init("HKKpgydMML8nmpH7O"); })();

    function submitOrder(event) {
      event.preventDefault();

      const fio = document.getElementById("fio").value;
      const phone = document.getElementById("phone").value;
      const receive = document.querySelector('input[name="receive"]:checked').value;
      const address = document.getElementById("address")?.value || "-";
      const lift = document.querySelector('input[name="lift"]:checked')?.value || "-";
      const floors = document.getElementById("floors")?.value || "0";

      const cart = getCart();
      if(cart.length === 0){ 
        Swal.fire({
          icon: 'warning',
          title: '–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!',
          text: '–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –ø–µ—Ä–µ–¥ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º –∑–∞–∫–∞–∑–∞.'
        });
        return; 
      }

      let cartText = "";
      cart.forEach(item => {
        cartText += `- ${item.name} x${item.qty} = ${item.price * item.qty} —Ç–≥\n`;
      });

      const total = document.getElementById("order-total").textContent;

      const templateParams = { fio, phone, receive, address, lift, floors, cart: cartText, total };

      // ‚è≥ –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º ¬´–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è...¬ª
      Swal.fire({
        title: '–ó–∞—è–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è...',
        text: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ',
        allowOutsideClick: false,
        didOpen: () => {
          Swal.showLoading();
        }
      });

      emailjs.send("service_usbyuzc", "template_rl357qe", templateParams)
        .then(() => {
          clearCart();
          closeCheckout();
          Swal.fire({
            icon: 'success',
            title: '–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑!',
            text: '–ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è üìû',
            confirmButtonText: '–û–∫'
          });
        })
        .catch((error) => {
          Swal.fire({
            icon: 'error',
            title: '–û—à–∏–±–∫–∞!',
            text: '–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.'
          });
          console.error("EmailJS error:", error);
        });
    }
  </script>

  <!-- –¢–µ–º–∞ -->
  <script>
    let THEME = localStorage.getItem('theme') || 'dark';
    applyTheme();
    function applyTheme() {
      if (THEME === 'light') {
        document.body.classList.add('light-theme');
        document.getElementById('theme-toggle').textContent = '‚òÄÔ∏è';
      } else {
        document.body.classList.remove('light-theme');
        document.getElementById('theme-toggle').textContent = 'üåô';
      }
    }
    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('theme-toggle').addEventListener('click', () => {
        THEME = (THEME === 'dark') ? 'light' : 'dark';
        localStorage.setItem('theme', THEME);
        applyTheme();
      });
    });
  </script>
</body>
</html>
